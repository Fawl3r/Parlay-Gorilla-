# üöÄ Render Deployment Setup Guide

This guide helps you collect all the required information for deploying Parlay Gorilla to Render.

## ‚úÖ What You Already Have

Based on your current `.env` file, you already have:

- ‚úÖ `THE_ODDS_API_KEY` - Set in your `.env` file
- ‚úÖ `THE_ODDS_API_FALLBACK_KEY` - Set in your `.env` file
- ‚úÖ `OPENAI_API_KEY` - Set in your `.env` file
- ‚úÖ `SPORTSRADAR_API_KEY` - `VWTUmCDH7i0VMLqC2i0GjbissbNe7GELF7XihpiP`
- ‚úÖ `OPENWEATHER_API_KEY` - `3c7b0addb7de780a3c7a1d2cc89fba77`
- ‚úÖ `PEXELS_API_KEY` - `2OAkQf5dKRNiKL4kFFG3V1sRZd9jmAoeyCp7F07BA55ucnWnidzu21DZ`
- ‚úÖ `RESEND_API_KEY` - `re_Zoqz4zwY_D9LgQBBDbznobq9VLEzxevLr`

## üìã What You Need to Get/Set

### üî¥ Required (Must Have)

#### 1. **JWT_SECRET** (Auto-generated by Render)
- ‚úÖ **Status**: Render will generate this automatically via `render.yaml`
- **Action**: No action needed - Render handles this

#### 2. **Domain URLs** (You need to decide)
You need to set these based on your domain:
- `FRONTEND_URL` - Your frontend domain (e.g., `https://www.parlaygorilla.com`)
- `BACKEND_URL` - Your backend API domain (e.g., `https://api.parlaygorilla.com`)
- `APP_URL` - Same as FRONTEND_URL (e.g., `https://www.parlaygorilla.com`)

**If you don't have a domain yet:**
- Use Render's default URLs temporarily:
  - Frontend: `https://parlay-gorilla-frontend.onrender.com`
  - Backend: `https://parlay-gorilla-backend.onrender.com`

### üü° Optional (Recommended)

#### 3. **LemonSqueezy** (For subscriptions & credit packs)
If you want to enable payments:

1. **Sign up**: Go to [lemonsqueezy.com](https://lemonsqueezy.com)
2. **Create a store**: Set up your store
3. **Get API Key**:
   - Go to Settings ‚Üí API
   - Create a new API key
   - Copy the key ‚Üí `LEMONSQUEEZY_API_KEY`
4. **Get Store ID**:
   - Go to Settings ‚Üí General
   - Copy your Store ID ‚Üí `LEMONSQUEEZY_STORE_ID`
5. **Set up Webhook**:
   - Go to Settings ‚Üí Webhooks
   - Add webhook URL: `https://api.parlaygorilla.com/api/webhooks/lemonsqueezy`
   - Copy webhook secret ‚Üí `LEMONSQUEEZY_WEBHOOK_SECRET`
6. **Create Credit Pack Products**:
   - Create products for: 10 credits, 25 credits, 50 credits, 100 credits
   - Copy each Variant ID ‚Üí `LEMONSQUEEZY_CREDITS_*_VARIANT_ID`

**Quick Links:**
- [LemonSqueezy Dashboard](https://app.lemonsqueezy.com)
- [LemonSqueezy API Docs](https://docs.lemonsqueezy.com/api)

#### 4. **Coinbase Commerce** (For crypto payments)
If you want to accept crypto:

1. **Sign up**: Go to [commerce.coinbase.com](https://commerce.coinbase.com)
2. **Create API Key**:
   - Go to Settings ‚Üí API Keys
   - Create new key
   - Copy ‚Üí `COINBASE_COMMERCE_API_KEY`
3. **Set up Webhook**:
   - Go to Settings ‚Üí Webhooks
   - Add webhook URL: `https://api.parlaygorilla.com/api/webhooks/coinbase`
   - Copy webhook secret ‚Üí `COINBASE_COMMERCE_WEBHOOK_SECRET`

**Quick Links:**
- [Coinbase Commerce Dashboard](https://commerce.coinbase.com/dashboard)
- [Coinbase Commerce Docs](https://docs.commerce.coinbase.com)

#### 5. **Solana/Inscriptions Worker** (For on-chain parlay proofs)
If you want to enable on-chain inscriptions:

1. **Get Solana Private Key**:
   - Generate a new Solana wallet or use existing
   - Export private key (base58 format)
   - Copy ‚Üí `SIGNER_PRIVATE_KEY`
   - ‚ö†Ô∏è **Keep this secret!** Never commit to git.

2. **Get Solana RPC URL**:
   - Option A: Use public RPC (free, rate-limited)
     - Mainnet: `https://api.mainnet-beta.solana.com`
     - Devnet: `https://api.devnet.solana.com`
   - Option B: Use paid RPC provider (recommended for production)
     - [Helius](https://helius.dev) - Free tier available
     - [QuickNode](https://quicknode.com) - Free tier available
     - [Alchemy](https://www.alchemy.com/solana) - Free tier available
   - Copy RPC URL ‚Üí `RPC`

**Quick Links:**
- [Solana Web3.js Docs](https://solana-labs.github.io/solana-web3.js/)
- [Helius RPC](https://helius.dev)
- [QuickNode RPC](https://quicknode.com)

## üìù Render Deployment Checklist

### Step 1: Deploy via Blueprint
1. Go to [Render Dashboard](https://dashboard.render.com)
2. Click **New +** ‚Üí **Blueprint**
3. Connect your GitHub repo
4. Render will auto-detect `render.yaml` and create all services

### Step 2: Set Environment Variables in Render

#### Backend Service (`parlay-gorilla-backend`)

**Auto-wired by Render (no action needed):**
- ‚úÖ `DATABASE_URL` - From PostgreSQL database
- ‚úÖ `REDIS_URL` - From Key Value store
- ‚úÖ `JWT_SECRET` - Auto-generated
- ‚úÖ `ENVIRONMENT=production`
- ‚úÖ `DEBUG=false`
- ‚úÖ `USE_SQLITE=false`
- ‚úÖ `OPENAI_ENABLED=true`

**You need to set manually:**
- [ ] `THE_ODDS_API_KEY` = (your key from .env)
- [ ] `THE_ODDS_API_FALLBACK_KEY` = (your key from .env)
- [ ] `OPENAI_API_KEY` = (your existing key from .env)
- [ ] `FRONTEND_URL` = (your frontend URL)
- [ ] `BACKEND_URL` = (your backend URL)
- [ ] `APP_URL` = (same as FRONTEND_URL)

**Optional (set if you have them):**
- [ ] `SPORTSRADAR_API_KEY` = `VWTUmCDH7i0VMLqC2i0GjbissbNe7GELF7XihpiP`
- [ ] `RESEND_API_KEY` = `re_Zoqz4zwY_D9LgQBBDbznobq9VLEzxevLr`
- [ ] `OPENWEATHER_API_KEY` = `3c7b0addb7de780a3c7a1d2cc89fba77`
- [ ] `PEXELS_API_KEY` = `2OAkQf5dKRNiKL4kFFG3V1sRZd9jmAoeyCp7F07BA55ucnWnidzu21DZ`
- [ ] `LEMONSQUEEZY_API_KEY` = (if you set up LemonSqueezy)
- [ ] `LEMONSQUEEZY_STORE_ID` = (if you set up LemonSqueezy)
- [ ] `LEMONSQUEEZY_WEBHOOK_SECRET` = (if you set up LemonSqueezy)
- [ ] `LEMONSQUEEZY_CREDITS_10_VARIANT_ID` = (if you set up LemonSqueezy)
- [ ] `LEMONSQUEEZY_CREDITS_25_VARIANT_ID` = (if you set up LemonSqueezy)
- [ ] `LEMONSQUEEZY_CREDITS_50_VARIANT_ID` = (if you set up LemonSqueezy)
- [ ] `LEMONSQUEEZY_CREDITS_100_VARIANT_ID` = (if you set up LemonSqueezy)
- [ ] `COINBASE_COMMERCE_API_KEY` = (if you set up Coinbase)
- [ ] `COINBASE_COMMERCE_WEBHOOK_SECRET` = (if you set up Coinbase)

#### Frontend Service (`parlay-gorilla-frontend`)

**Auto-wired by Render (no action needed):**
- ‚úÖ `PG_BACKEND_URL` - From backend service (private network)
- ‚úÖ `NEXT_PUBLIC_SITE_URL` = `https://www.parlaygorilla.com` (from render.yaml)
- ‚úÖ `NEXT_PUBLIC_API_URL` = `https://api.parlaygorilla.com` (from render.yaml)

**You may need to update:**
- [ ] `NEXT_PUBLIC_SITE_URL` = (if using different domain)
- [ ] `NEXT_PUBLIC_API_URL` = (if using different domain)

#### Inscriptions Worker (`parlay-gorilla-inscriptions-worker`)

**Auto-wired by Render (no action needed):**
- ‚úÖ `REDIS_URL` - From Key Value store
- ‚úÖ `DATABASE_URL` - From PostgreSQL database
- ‚úÖ `IQ_HANDLE` = `ParlayGorilla`
- ‚úÖ `IQ_DATATYPE` = `parlay_proof`

**You need to set manually (if enabling inscriptions):**
- [ ] `SIGNER_PRIVATE_KEY` = (your Solana private key)
- [ ] `RPC` = (your Solana RPC URL)

## üîç Quick Reference: Where to Find Your Keys

### Already in Your .env (Copy These to Render)

| Variable | Current Value | Location in .env |
|----------|--------------|-----------------|
| `THE_ODDS_API_KEY` | (your key from .env) | Line 38 |
| `THE_ODDS_API_FALLBACK_KEY` | (your key from .env) | Line 40 |
| `OPENAI_API_KEY` | (your key from .env) | Line 43 |
| `SPORTSRADAR_API_KEY` | `VWTUmCDH7i0VMLqC2i0GjbissbNe7GELF7XihpiP` | Line 50 |
| `OPENWEATHER_API_KEY` | `3c7b0addb7de780a3c7a1d2cc89fba77` | Line 46 |
| `PEXELS_API_KEY` | `2OAkQf5dKRNiKL4kFFG3V1sRZd9jmAoeyCp7F07BA55ucnWnidzu21DZ` | Line 101 |
| `RESEND_API_KEY` | `re_Zoqz4zwY_D9LgQBBDbznobq9VLEzxevLr` | Line 104 |

## üöÄ Next Steps

1. **Run the setup script** to see what you have:
   ```bash
   cd backend
   python scripts/check_render_setup.py
   ```

2. **Decide on your domains** (or use Render defaults)

3. **Set up optional services** (LemonSqueezy, Coinbase, Solana) if needed

4. **Deploy to Render** using the Blueprint

5. **Set environment variables** in Render dashboard

6. **Test your deployment**!

## üìö Additional Resources

- [Render Documentation](https://render.com/docs)
- [Render Blueprint Guide](https://render.com/docs/blueprint-spec)
- [The Odds API Docs](https://the-odds-api.com/liveapi/guides/v4/)
- [OpenAI API Docs](https://platform.openai.com/docs)

